# Copyright 2024 Defense Unicorns
# SPDX-License-Identifier: AGPL-3.0-or-later OR LicenseRef-Defense-Unicorns-Commercial

apiVersion: uds.dev/v1alpha1
kind: Package
metadata:
  name: valkey-test
spec:
  network:
    allow:
      - direction: Egress
        selector:
          app: valkey-test
        remoteGenerated: Anywhere  # Parameterize this to be the actual namespace being tested
        # TODO: add in ports
      # - direction: Egress
      #   selector:
      #     purpose: test-valkey
      #   remoteNamespace: valkey-standalone
      #   remoteSelector:
      #     app.kubernetes.io/name: valkey
      #   port: 6379
      #   description: "Egress from Valkey CLI (for tests of standalone instance)"
      # - direction: Egress
      #   selector:
      #     purpose: test-valkey
      #   remoteNamespace: valkey-replicated-w-sentinel
      #   remoteSelector:
      #     app.kubernetes.io/name: valkey
      #   port: 6379
      #   description: "Egress from Valkey CLI (for tests of replicated w/ sentinel) to read-port"
      # - direction: Egress
      #   selector:
      #     purpose: test-valkey
      #   remoteNamespace: valkey-replicated-w-sentinel
      #   remoteSelector:
      #     app.kubernetes.io/name: valkey
      #   port: 26379
      #   description: "Egress from Valkey CLI (for tests of replicated w/ sentinel) to sentinel-port"
